<!DOCTYPE html>

<head>
  <title>Nightbus | Edit Schedule</title>
  <link rel="stylesheet" href="../static/css/normalize.css">
  <link rel="stylesheet" href="../static/css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src='../static/main.js'></script>
	<style>

#submit-wrap {
	text-align: center;
	text-transform: uppercase;
}

#submitbtn {
	color:#5f6062;
	padding:10px 40px;
	border:2px solid #233c63;
	background-color: transparent;
	border-radius: 20px;
	}

#submitbtn:hover {
	color: #F8F8FF;
	background-color: #233c63;
	transition: all 0.5s ease;
}
	</style>

</head>

<body>
  <div class="wrapper">

    <div class="header">
      <h1> Nightbus | Edit Schedule </h1>
     
			<div class="nav">
				{% if session['logged_in'] %}
					<a href="{{ url_for('home') }}">Rider</a>
					<a href="{{ url_for('driver') }}">Driver</a>
					<a href="{{ url_for('admin') }}"> Admin</a>
					<a href="{{ url_for('logout') }}">Sign Out</a>
				{% endif %}

			</div>
		</div>

    <div class="content">
     <table>
        <tr>
          <th>Day</th>
          <th> Driver </th>
        </tr>
        <tr>
          <td> Monday </td>
          <td>
            <div class="dropdown">

              <select id="mon"  name="driver_id">
										<option selected disabled hidden>Choose driver</option>
                    {% for person in drivers %}
                    <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                    {% endfor %}
                </select>

            </div>
          </td>
        </tr>
        <tr>
          <td> Tuesday </td>
          <td>
            <div class="dropdown">

              <select id="tue" name="driver_id">
										<option selected disabled hidden>Choose driver</option>
                    {% for person in drivers %}
                    <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                    {% endfor %}
                </select>


            </div>
          </td>
        </tr>
        <tr>
          <td> Wednesday </td>
          <td>
            <div class="dropdown">

              <select id="wed" name="driver_id">
										<option selected disabled hidden>Choose driver</option>
                    {% for person in drivers %}
                    <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                    {% endfor %}
                </select>


            </div>
          </td>
        </tr>
        <tr>
          <td>Thursday </td>
          <td>
            <div class="dropdown">

              <select id="thu" name="driver_id">
									<option selected disabled hidden>Choose driver</option>
                  {% for person in drivers %}
                  <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                  {% endfor %}
                </select>


            </div>
          </td>
        </tr>
        <tr>
          <td> Friday </td>
          <td>
            <div class="dropdown">

              <select id="fri" name="driver_id">
										<option selected disabled hidden>Choose driver</option>
                    {% for person in drivers %}
                    <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                    {% endfor %}
                </select>


            </div>
          </td>
        </tr>
        <tr>
          <td> Saturday </td>
          <td>
            <div class="dropdown">

              <select id="sat" name="driver_id">
										<option selected disabled hidden>Choose driver</option>
                    {% for person in drivers %}
                    <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                    {% endfor %}
                </select>


            </div>
          </td>
        </tr>
        <tr>
          <td> Sunday </td>
          <td>
            <div class="dropdown">

              <select id="sun" name="driver_id">
										<option selected disabled hidden>Choose driver</option>
                    {% for person in drivers %}
                    <option value = {{person.id}} >{{ person.firstname}} {{ person.lastname }}, ID: {{ person.id }}</option>
                    {% endfor %}
                </select>


            </div>
          </td>
					<tr>
						<td id="submit-wrap" colspan="2"><a id="submitbtn" href="display">Submit</a></td>
					</tr>
        </tr>

      </table>


    </div>

  </div>

  <script>
    $(document).ready(function() {
      $('select').change(function() {

      	var drivers = [

        $("#mon").find(':selected').val(),
        $("#tue").find(':selected').val(),
        $("#wed").find(':selected').val(),
        $("#thu").find(':selected').val(),
        $("#fri").find(':selected').val(),
        $("#sat").find(':selected').val(),
        $("#sun").find(':selected').val(),
      ];

      $('#submitbtn').one('click',function(event) {
        event.preventDefault();
        $.ajax({
          url: "assign",
          type: "POST",
          data: {drivers: drivers},
          dataType: "json",
          success: function() {
            console.log("success");
          },
          error: function() {
            console.log("error");
          }
            });

        });

      });
    });
  </script>
</body>
