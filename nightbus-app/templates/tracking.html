<!DOCTYPE html>

<head>
	<title>Nightbus | Drivers</title>
	<link rel="stylesheet" href="../static/css/normalize.css">
	<link rel="stylesheet" href="../static/css/style.css">
	<script type=text/javascript src="{{url_for('static',filename='jquery-3.2.1.js') }}"></script>
	<script src='../static/main.js'></script>
</head>

<body>
	<div class="wrapper">

		<div class="header">
			<h1>The NightBus</h1>
			<div class="nav">
				{% if session['logged_in'] %} {% if session['role'] == 'driver' %}
				<a href="{{ url_for('drivermaps') }}">Maps</a>
				<a href="{{ url_for('rider') }}">Rider</a>
				<a href="{{ url_for('logout') }}">Sign Out</a> {% elif session['role'] == 'admin' %}
				<a href="{{ url_for('drivermaps') }}">Maps</a>
				<a href="{{ url_for('admin') }}">Admin</a>
				<a href="{{ url_for('logout') }}">Sign Out</a> {% endif %} {% else %}
				<a href="{{ url_for('driverlogin') }}">Driver Login</a>
				<a href="{{ url_for('adminlogin') }}"> Admin Login</a> {% endif %}
			</div>
		</div>
		<div class="content">
			<form  action="/tracking" method="post">
				<ul class="form-container">
					<li id="user-input">
						<input id="autocomplete_0" onFocus="initAutocomplete()" type="text" placeholder="address" name="address" required><br>
					</li>
					<li>
						<input id="toggleBtn" class="submit-button" type="button" value="Add another address">
					</li>
					<li>
						<input class="submit-button" name="submit" type="submit" value="Save!">
					</li>

				</ul>
			</form>

			<script>
				var current_id = 0;
				$('#toggleBtn').click(function() {
					createInput($('#user-input'));
				});

				function createInput(element) {
					var id = current_id ++;
					current_id = id;
					var newInputField = element.clone()
																.find("input:text").val("").end();

					newInputField.find("input:text").attr('id', element.find("input:text").attr('id').split('_')[0] + '_' + id);
				 	element.after(newInputField);
				}

				var autocomplete;

				function initAutocomplete() {
					// Create the autocomplete object
					autocomplete = new google.maps.places.Autocomplete(document.getElementById('autocomplete_' + current_id));

					// When the user selects an address from the dropdown, populate the address fields in the form.
					autocomplete.addListener('place_changed', fillInAddress);
				}

				function fillInAddress() {
					// Get the place details from the autocomplete object.
					var place = autocomplete.getPlace();
				}
			</script>
			<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDK9cnUO7ivzLXGMxizbxt5y-sng3IjTIo&libraries=places" async defer></script>
		</div>
</body>
